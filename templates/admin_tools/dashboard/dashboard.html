{% load i18n staticfiles admin_tools_dashboard_tags cms_tags %}

{% block dashboard_scripts %}
<script type="text/javascript" src="{% static "admin_tools/js/utils.js" %}"></script>
<script type="text/javascript" charset="utf-8">
    // Load js files syncronously and conditionally

    var js_files = [
        {
            src : '{% static "admin_tools/js/jquery/jquery.min.js" %}',
            test: function() { return typeof(jQuery) == 'undefined'; }
        },
        {
            src : '{% static "admin_tools/js/jquery/jquery-ui.min.js" %}',
            test: function() { return typeof(jQuery.ui) == 'undefined'; }
        },
        {
            src : '{% static "admin_tools/js/json.min.js" %}',
            test: function() { return typeof(JSON.stringify) == 'undefined'; }
        },
        {
            src : '{% static "admin_tools/js/jquery/jquery.cookie.min.js" %}',
            test: function() { return typeof(jQuery.cookie) == 'undefined'; }
        },
        {
            src : '{% static "admin_tools/js/jquery/jquery.dashboard.js" %}',
            test: function() { return true; }
        },
        {
            src : '{% static "admin_tools/js/dashboard.js" %}',
            test: function() { return true; }
        }{% for js in dashboard.Media.js %},
        {
            src : '{% static js %}',
            test: function() { return true; }
        }{% endfor %}
    ];

    loadScripts(js_files, function(){
        jQuery(function($) {
            init_dashboard(
                '{{ dashboard.get_id }}',
                {{ dashboard.columns }},
                {% autoescape off %}{{ dashboard_preferences }}{% endautoescape %},
                '{% url 'admin-tools-dashboard-set-preferences' dashboard.get_id %}'
            );
        });
    });
</script>
{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <style>
        ul.messagelist{
            position: relative;
            top: 34px;
        }
    </style>
<link rel="stylesheet" href="{% static 'inscricao/css/dash.css' %}">
{% endblock %}

{% block dashboard_title %}
{% if dashboard.title %}
<h1 class="dashboard-title">{{ dashboard.title|capfirst }}</h1>
{% endif %}
{% endblock %}

{% block dashboard_panel %}
<div id="dashboard-panel">
    <h3><a href="#">{% trans "Modules" %}</a></h3>
    {% if has_disabled_modules %}
    <ul>
        {% spaceless %}
        {% for module in dashboard.children %}
        {% if not module.enabled %}
        <li><a href="#" rel="module_{{ module.id }}" class="addlink add-dashboard-module">{{ module.title|capfirst }}</a></li>
        {% endif %}
        {% endfor %}
        {% endspaceless %}
    </ul>
    {% endif %}
</div>
{% endblock %}

{% block dashboard_container %}
<div id="{{ dashboard.get_id }}" class="dashboard-container">
    {% for module in dashboard.children %}
{% admin_tools_render_dashboard_module module %}{% endfor %}
</div>
{% endblock %}
{% load poweradmin %}
{% is_admin as admin %}
{% if not admin %}
{% empresas_cadastradas as emp_cadastradas%}
{% empresas_pendentes as emp_pendentes %}
<div class="quadros">
    <div class="quadro">
        {% if emp_cadastradas > 0 %}
            {% if emp_pendentes > 0 %}
              <h2>Empresa pendente de validação</h2>
            {% else %}
                <h2>Empresa cadastrada</h2>
                <svg class="check" aria-hidden="true" focusable="false" data-prefix="far" data-icon="check-circle" class="svg-inline--fa fa-check-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"></path></svg>
            {% endif %}
        {% else %}
            <h2>Cadastre os dados da sua empresa</h2>
        {% endif %}
    </div>
    {% inscricoes_cadastradas as inscricoes %}
    <div class="quadro">
        {% if inscricoes > 0 %}
            <h2>Inscrições realizadas</h2>
            <h1 title="Número de inscrições realizadas">{{inscricoes}}</h1>
        {% else %}
            <h2>Registre as inscrições</h2>
        {% endif %}
    </div>
    {% inscricoes_com_erro as erros %}
    <div class="quadro">
        <h2>Imprima o Formulário de Custos</h2>
        <a href="/formulario_custos/" class="print" title="Clique para imprimir o formulário de custos"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="print" class="svg-inline--fa fa-print fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"></path></svg> </a>
    </div>
    <div class="quadro">
        {% if erros == 0 %}
            <h2>Finalize o processo</h2>
            <a href="#" class="btn" title="Clique para finalizar o processo">Concluir</a>
        {% else %}
            <h2>Corrija as inscrições antes de finalizar o processo</h2>
        {% endif %}
    </div>
</div>
{% endif %}